package Polinom;

import java.util.ArrayList;
public class Lagrange extends Polinom {
	
   Lagrange(){
	   super (0,0);
	   ArrList= new ArrayList<double[]>();
   }
   
   public ArrayList<double[]> ArrList;//список одномерных массивов

   void  GetLagrange(){
	   double [][]Uzly= new double [2][ArrList.size()];//список узлов берем и перезаписываем все узлы в двумерный массиив, чтобы использовать метод гетлагранж
	   for (int i =0; i<ArrList.size();i++){
		   Uzly[0][i]=ArrList.get(i)[0];
		   Uzly[1][i]=ArrList.get(i)[1];   
	  }
	   Lagrange TMP= new Lagrange (Uzly);
	   coef=new double[TMP.coef.length];
	   for(int i=0;i<(TMP.coef.length);i++){
		   coef[i]=TMP.coef[i];
	   }
   }
   
	Lagrange(double[][]nodes){
		super(0,0);
		int n = nodes[0].length;//количество узлов
	    Polinom res = new Polinom(0,0);
	     
	    for(int i=0;i<n;i++){
	    	Polinom l = new Polinom(1,0);//полином, состоящий из единицы
	    	for(int j=0;j<n;j++){
	    		if(j!=i){
	    			Polinom tmp = new Polinom(-1*nodes[0][j],0);
	    			Polinom tmp2=new Polinom(1,1);// это х
	    			tmp=tmp.sum(tmp2); 
	    			double r = nodes[0][i]-nodes[0][j];// промежуточное число(один из знаменателей в лагранже)
	    			tmp=tmp.umnogCh(1/r);
	    			l=l.umnog(tmp);
	    		}
	    	}// Получили l 
	    	l=l.umnogCh(nodes[1][i]);
	    	res=res.sum(l);	
	    }
	    coef = new double[res.coef.length];// длина массива res
	    pow=res.coef.length-1;
	    for(int i=0;i<res.coef.length;i++){
	    	coef[i]=res.coef[i];//копируем содержимое res в coef
	    }
	    System.out.println("Полином Лагранжа:");
	    System.out.println(this);
	}
}

